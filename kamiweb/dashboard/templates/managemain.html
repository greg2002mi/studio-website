{% extends "base-admin.html" %}
{% load i18n %}
{% load static %}

{% block head_js %}
<script src="{% static 'js/dropzone.min.js' %}"></script>
<link rel="stylesheet" href="{% static 'css/dropzone.min.css' %}" type="text/css" />
<link rel="stylesheet" href="{% static 'css/w3.css' %}"/>
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.css" />
<link rel="stylesheet" src="{% static '/datatables/datatables_style.css' %}"></link>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<style>
label {
    color: #555555;  /* Dark grey color */
}
</style>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.js"></script>
<style>
	.modal {
            display: none;
            position: fixed;
            z-index: 1;
            padding-top: 100px;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0,0,0);
            background-color: rgba(0,0,0,0.9);
        }
        .modal-content {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 700px;
        }
        .close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #fff;
            font-size: 40px;
            font-weight: bold;
        }
        .close:hover,
        .close:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }
</style>
<script>
		window.onload = (event) => {
		  setTimeout(()=>{
			const script = document.createElement('script');
			script.src="https://www.instagram.com/embed.js"
			document.getElementsByTagName('head')[0].appendChild(script)
		  }, 25)
		}
</script>
<script>
	$(document).ready(function() {
    var modal = document.getElementById("videoModal");
    var modalVideo = document.getElementById("modalVideo");
    var modalVideoSource = document.getElementById("modalVideoSource");
    var closeBtn = document.getElementsByClassName("close")[0];

    function adjustModalVideoHeight() {
        var windowHeight = window.innerHeight;
        var maxVideoHeight = windowHeight * 0.8; // 80% of the window height
        modalVideo.style.height = maxVideoHeight + 'px';
        modalVideo.style.width = 'auto'; // Maintain aspect ratio
    }

    // Adjust the video height when the window is resized
    window.onresize = adjustModalVideoHeight;

    // When a video link is clicked
    $('.video-link').on('click', function(e) {
        e.preventDefault(); // Prevent default action
        var videoSrc = $(this).data('video');
        modalVideoSource.src = videoSrc;
        modalVideo.load();
        modal.style.display = "flex";
        modalVideo.play();
        adjustModalVideoHeight(); // Adjust the height when the modal is shown
    });

    // When the close button is clicked
    closeBtn.onclick = function() {
        modal.style.display = "none";
        modalVideo.pause();
        modalVideo.currentTime = 0; // Reset the video to start
        modalVideoSource.src = ""; // Clear the video source
    }

    // When anywhere outside of the modal is clicked
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
            modalVideo.pause();
            modalVideo.currentTime = 0; // Reset the video to start
            modalVideoSource.src = ""; // Clear the video source
        }
    }
});
</script>	
<script>
$(document).ready(function() {
    $('#filterservice').DataTable({
        "columnDefs": [
            { "orderable": false, "targets": [] } // Disable sorting for columns 4, and 5
        ]
    });
});

</script>
{% endblock %}

{% block app_content %}
{% load crispy_forms_tags %}  

    <div class="py-vh-6 bg-gray-100 text-light w-100 overflow-hidden" id="workwithus">
      <div class="container">
			<div class="row d-flex justify-content-center text-center">
            <div class="col-lg-4 text-center" data-aos="fade">
              <p class="text-secondary lead">{% translate "Upload promo videos" %}</p>		 
					 <a class="btn btn-success btn-xl shadow me-3 mt-4" data-aos="fade-down" href="{% url 'new_vs' %}">{% translate "Upload videos" %}</a>
			</div>
			<div class="col-lg-4 text-center" data-aos="fade">
              <p class="text-secondary lead">{% translate "List of Our services" %}</p>		 
					 <a class="btn btn-success btn-xl shadow me-3 mt-4" data-aos="fade-down" href="{% url 'new_wd' %}">{% translate "Add service" %}</a>
			</div>
			<div class="col-lg-4 text-center" data-aos="fade">
              <p class="text-secondary lead">{% translate "What we accomplish" %}</p>		 
					 <a class="btn btn-success btn-xl shadow me-3 mt-4" data-aos="fade-down" href="{% url 'new_fw' %}">{% translate "Add accomplishment" %}</a>
			</div>
			</div>	
          

        
      </div>
    </div>
	
	<div class="py-vh-6 bg-gray-300 text-light w-100 overflow-hidden" id="workwithus">
      <div class="container">
        <div class="row d-flex justify-content-center">
          <div class="row d-flex justify-content-center text-center">
            <div class="col-lg-12 text-center" data-aos="fade">
              <!--<p class="text-secondary lead">{% translate "All publications:" %}</p>-->
              <h2 class="display-6 mb-5">{% translate "Promotional video table:" %}</h2>
            </div>
            <div class="col-12">
              <table class="table table-responsive text-nowrap" style="" id="filterservice">
				<thead>
					<tr class="table-dark">
					  <th scope="col">#</th>
					  <th scope="col">{% translate "Main video" %}</th>
					  <th scope="col">{% translate "2nd video" %}</th>
					  <th scope="col">{% translate "3rd video" %}</th>
					  <th scope="col">{% translate "Action" %}</th>
					</tr>
				</thead>
				<tbody>
					{% for s in vs_data %}
					<tr class="table-dark">
					  
					   <th scope="row">{{ s.id }}</th>
					  <td><a href="#" class="video-link" data-video="{{s.video1.url}}">
							Play Video
						</a></td>
					  <td><a href="#" class="video-link" data-video="{{s.video2.url}}">
							Play Video
						</a></td>
					  <td><a href="#" class="video-link" data-video="{{s.video3.url}}">
							Play Video
						</a></td>
					  <td><a class="btn btn-success btn-sm" href="{% url 'edit_vs' entry=s.id %}" role="button">{% translate "Edit" %}</a>
					      <a class="btn btn-danger btn-sm" href="{% url 'delete_vs' entry=s.id %}" role="button">{% translate "Delete" %}</a>
					  </td>
					</tr>
					{% endfor %}
				</tbody>
			  </table>
            </div>
          </div>

        </div>
      </div>
    </div>
	
	
	
	<div class="py-vh-6 bg-gray-300 text-light w-100 overflow-hidden" id="workwithus">
      <div class="container">
        <div class="row d-flex justify-content-center">
          <div class="row d-flex justify-content-center text-center">
            <div class="col-lg-12 text-center" data-aos="fade">
              <!--<p class="text-secondary lead">{% translate "All publications:" %}</p>-->
              <h2 class="display-6 mb-5">{% translate "Services we provide:" %}</h2>
            </div>
            <div class="col-12">
              <table class="table table-responsive text-nowrap" style="" id="filterservice">
				<thead>
					<tr class="table-dark">
					  <th scope="col">#</th>
					  <th scope="col">{% translate "Service" %}</th>
					  <th scope="col">{% translate "Action" %}</th>
					</tr>
				</thead>
				<tbody>
					{% for s in wd_data %}
					<tr class="table-dark">
					  
					   <th scope="row">{{ s.id }}</th>
					  <td>{{ s.service }}</td>
					  <td><a class="btn btn-success btn-sm" href="{% url 'edit_wd' entry=s.id %}" role="button">{% translate "Edit" %}</a>
					      <a class="btn btn-danger btn-sm" href="{% url 'delete_wd' entry=s.id %}" role="button">{% translate "Delete" %}</a>
					  </td>
					</tr>
					{% endfor %}
				</tbody>
			  </table>
            </div>
          </div>

        </div>
      </div>
    </div>
	
	
	<div class="py-vh-6 bg-gray-300 text-light w-100 overflow-hidden" id="workwithus">
      <div class="container">
        <div class="row d-flex justify-content-center">
          <div class="row d-flex justify-content-center text-center">
            <div class="col-lg-12 text-center" data-aos="fade">
              <!--<p class="text-secondary lead">{% translate "All publications:" %}</p>-->
              <h2 class="display-6 mb-5">{% translate "Services we provide:" %}</h2>
            </div>
            <div class="col-12">
              <table class="table table-responsive text-nowrap" style="" id="filterservice">
				<thead>
					<tr class="table-dark">
					  <th scope="col">#</th>
					  <th scope="col">{% translate "Service" %}</th>
					  <th scope="col">{% translate "Action" %}</th>
					</tr>
				</thead>
				<tbody>
					{% for s in fw_data %}
					<tr class="table-dark">
					  
					   <th scope="row">{{ s.id }}</th>
					  <td>{{ s.service }}</td>
					  <td><a class="btn btn-success btn-sm" href="{% url 'edit_fw' entry=s.id %}" role="button">{% translate "Edit" %}</a>
					      <a class="btn btn-danger btn-sm" href="{% url 'delete_fw' entry=s.id %}" role="button">{% translate "Delete" %}</a>
					  </td>
					</tr>
					{% endfor %}
				</tbody>
			  </table>
            </div>
          </div>

        </div>
      </div>
    </div>
	
 
<div id="videoModal" class="modal">
	<span class="close">&times;</span>
	<video class="modal-content" id="modalVideo" controls>
		<source id="modalVideoSource" src="" type="video/mp4">
		Your browser does not support the video tag.
	</video>
</div>
  {% endblock %}